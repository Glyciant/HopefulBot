{% include "./header.html" %}
<div class="row">
  <div class="col s10 offset-s1 deep-purple lighten-5" style="border-radius:20px; margin-top:15px; padding: 15px;">
    <h5 style="display: inline-block;">Custom Commands</h5>{% if editor %}<a style="float: right; display: inline" href="#modal-add-command" class="btn deep-purple darken-2 white-text modal-trigger">+ Add Command</a>
    <div id="modal-add-command" class="modal">
      <div class="modal-content">
        <h4>Add Custom Command</h4>
        <form class="col s12">
          <div class="input-field col s12">
            <input placeholder="!twitter" id="command_name" type="text">
            <label for="command_name">Command Name</label>
          </div>
          <div class="input-field col s12">
            <textarea id="command_response" class="materialize-textarea" placeholder="Check out my Twitter at https://twitter.com/Heepsbot!"></textarea>
            <label for="command_response">Command Response</label>
          </div>
          <div class="input-field col s12">
            <select id="command_userlevel">
              <option selected>All Users</option>
              <option>Twitch Turbo Users</option>
              <option>Subscribers</option>
              <option>Regulars</option>
              <option>Moderators</option>
              <option>Editors</option>
              <option>Broadcaster</option>
              <option>Twitch Global Moderators</option>
              <option>Twitch Admins</option>
              <option>Twitch Staff</option>
              <option>Bot Admins</option>
            </select>
          </div>
          <div class="input-field col s6">
            <input placeholder="10" id="command_cost" type="number">
            <label for="command_cost">Command Points Cost</label>
          </div>
          <div class="input-field col s6">
            <input placeholder="5" id="command_reward" type="number">
            <label for="command_reward">Command Points Reward</label>
          </div>
          <div class="input-field col s12">
            <input placeholder="30" id="command_cooldown" type="number">
            <label for="command_cooldown">Command Cooldown</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close btn-flat" id="add-command" data-user="{{owner}}">Add</a>
      </div>
    </div>
    {% endif %}
    <table class="bordered">
      <thead class="row">
        <th style="padding: 5px;" class="col s2">Command Name</th>
        <th style="padding: 5px;" class="col s8">Response</th>
        {% if editor %}
        <th  style="padding: 5px;"class="col s2">Actions</th>
        {% endif %}
      </thead>
      <tbody>
        {% for command in data %}
          <tr class="row" style="margin-top: 5px;">
            <td class="col s2" style="padding: 5px;">{{command.name}}</td>
            <td class="col s8" style="padding: 5px;">{{command.response}}</td>
            {% if editor %}
            <td class="col s2" style="padding: 5px;">
              <a class="btn orange darken-4 white-text modal-trigger" href="#modal-edit-{{command.name}}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
              <a class="btn red darken-4 white-text modal-trigger" href="#modal-delete-{{command.name}}"><i class="fa fa-trash-o" aria-hidden="true"></i></a>
            </td>
            <div id="modal-edit-{{command.name}}" class="modal">
              <div class="modal-content">
                <h4>Edit Command - {{command.name}}</h4>
                <form class="col s12">
                  <div class="input-field col s12">
                    <input value="{{command.name}}" placeholder="!twitter" id="edit-command_name-{{command.id}}" type="text" class="validate">
                    <label for="edit-command_name-{{command.id}}">Command Name</label>
                  </div>
                  <div class="input-field col s12">
                    <textarea id="edit-command_response-{{command.id}}" class="materialize-textarea" placeholder="Check out my Twitter at https://twitter.com/Heepsbot!">{{command.response}}</textarea>
                    <label for="edit-command_response-{{command.id}}">Command Response</label>
                  </div>
                  <div class="input-field col s12">
                    <select id="edit-command_userlevel-{{command.id}}">
                      <option>All Users</option>
                      <option>Twitch Turbo Users</option>
                      <option>Subscribers</option>
                      <option>Regulars</option>
                      <option>Moderators</option>
                      <option>Editors</option>
                      <option>Broadcaster</option>
                      <option>Twitch Global Moderators</option>
                      <option>Twitch Admins</option>
                      <option>Twitch Staff</option>
                      <option>Bot Admins</option>
                    </select>
                  </div>
                  <div class="input-field col s6">
                    <input value="{{command.cost}}" placeholder="10" id="edit-command_cost-{{command.id}}" type="number" class="validate">
                    <label for="edit-command_cost-{{command.id}}">Command Points Cost</label>
                  </div>
                  <div class="input-field col s6">
                    <input value="{{command.add}}" placeholder="5" id="edit-command_reward-{{command.id}}" type="number" class="validate">
                    <label for="edit-command_reward-{{command.id}}">Command Points Reward</label>
                  </div>
                  <div class="input-field col s12">
                    <input value="{{command.cooldown}}" placeholder="30" id="edit-command_cooldown-{{command.id}}" type="number" class="validate">
                    <label for="edit-command_cooldown-{{command.id}}">Command Cooldown</label>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <a href="#!" class="modal-close btn-flat" id="edit-command" data-channel="{{owner}}" data-id="{{command.id}}">Edit</a>
              </div>
            </div>
            <div id="modal-delete-{{command.name}}" class="modal">
              <div class="modal-content">
                <h4>Confirm Action</h4>
                <p>Are you sure you want to delete command {{command.name}}?</p>
              </div>
              <div class="modal-footer">
                <a href="#!" class="modal-close btn-flat">No</a>
                <a href="#!" class="modal-close btn-flat" id="delete-command" data-id="{{command.id}}">Yes</a>
              </div>
            </div>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<script src="/js/twitch_commands.js"></script>

{% include "./footer.html" %}
